webpackJsonp([9],{DTcy:function(n,e,t){var i=t("pIcg");"string"==typeof i&&(i=[[n.i,i,""]]),i.locals&&(n.exports=i.locals);t("rjj0")("18637010",i,!0)},E4LH:function(n,e,t){"use strict";e.b=function(n){return["admin","worker","requester"].indexOf(n.trim())>=0},e.a=function(n){return/^(([^<>()\[\]\\.,;:\s@"]+(\.[^<>()\[\]\\.,;:\s@"]+)*)|(".+"))@((\[[0-9]{1,3}\.[0-9]{1,3}\.[0-9]{1,3}\.[0-9]{1,3}\])|(([a-zA-Z\-0-9]+\.)+[a-zA-Z]{2,}))$/.test(n)},e.c=function(n){return/^[\u4e00-\u9fa5_a-zA-Z0-9]+$/.test(n)}},HtKu:function(n,e,t){"use strict";Object.defineProperty(e,"__esModule",{value:!0});var i=t("//Fk"),s=t.n(i),r=t("E4LH"),l=t("BVtZ"),a={name:"index",data:function(){var n=function(n,e,t){e?t():t(new Error("该项不能为空"))};return{tagOptions:["游戏","人物","生活","军事","风景","建筑","艺术","影视","工业","交通","书籍","食物","玩具","用具","服饰","体育","医疗","天文","标志","其他"],mission:{title:"",type:"",pics:[],description:"",label:[],perPoints:10},missionRules:{title:[{validator:function(n,e,t){return e?Object(r.c)(e)?e.length<4||e.length>10?t(new Error("标题长度请在4到10之间")):void t():t(new Error("不要带特殊符号")):t(new Error("标题不能为空"))},trigger:"change"}],type:[{validator:n,trigger:"change"}],label:[{validator:n,trigger:"change"}],description:[{validator:function(n,e,t){e?e.length<10?t(new Error("描述长度应该大于10")):t():t(new Error("描述不能为空"))},trigger:"change"}],upload:[{validator:n,trigger:"change"}]},loading:!1,picNumber:0}},watch:{},computed:{estimateTime:function(){if(0===this.picNumber)return 0;var n=3/this.mission.perPoints*.5*this.picNumber;return n>3?n:3}},methods:{onSubmit:function(){var n=this;this.$refs.missionForm.validate(function(e){if(!e)return!1;var t=n.$refs.upload.uploadFiles,i=n;i.mission.pics=[];for(var r=[],a=0;a<t.length;a++){var o=t[a].raw;r[a]=n.readFile(o)}s.a.all(r).then(function(n){i.mission.pics=n,i.loading=!0;var e=i.mission;e.pics.length<3?i.$message({message:"图片数量太少",type:"warning"}):Object(l.c)(e.label,e.description,e.title,e.type,e.perPoints,e.pics).then(function(n){i.loading=!1,n.data.result?(i.resetForm(),i.$message({message:"任务建立成功",type:"success"})):i.$message({message:"任务建立失败",type:"error"})})})})},resetForm:function(){this.$refs.missionForm.resetFields(),this.$refs.upload.uploadFiles=[],this.picNumber=0,this.mission.perPoints=9},handleRemove:function(n,e){this.picNumber=e.length},handleChange:function(n,e){this.picNumber=e.length},handlePreview:function(n){},readFile:function(n){return new s.a(function(e,t){var i=new FileReader;i.onload=function(){e(i.result)},i.onerror=t,i.readAsDataURL(n)})}}},o={render:function(){var n=this,e=n.$createElement,t=n._self._c||e;return t("div",[t("el-form",{ref:"missionForm",staticStyle:{width:"500px"},attrs:{model:n.mission,rules:n.missionRules,"status-icon":"","label-width":"80px",size:"small"},nativeOn:{submit:function(e){if(!("button"in e)&&n._k(e.keyCode,"prevent。",void 0,e.key))return null}}},[t("el-form-item",{attrs:{label:"任务标题",prop:"title"}},[t("el-input",{attrs:{placeholder:"请输入一个精简的有意义的标题"},model:{value:n.mission.title,callback:function(e){n.$set(n.mission,"title",e)},expression:"mission.title"}})],1),n._v(" "),t("el-form-item",{attrs:{label:"标注类型",prop:"type"}},[t("el-select",{staticStyle:{width:"100%"},attrs:{placeholder:"请选择标注类型"},model:{value:n.mission.type,callback:function(e){n.$set(n.mission,"type",e)},expression:"mission.type"}},[t("el-option",{attrs:{label:"仅评注",value:"comment"}}),n._v(" "),t("el-option",{attrs:{label:"边界标记",value:"border_mark"}}),n._v(" "),t("el-option",{attrs:{label:"方框标记",value:"frame_mark"}}),n._v(" "),t("el-option",{attrs:{label:"边界标记+评注",value:"border_mc"}}),n._v(" "),t("el-option",{attrs:{label:"方框标记+评注",value:"frame_mc"}})],1)],1),n._v(" "),t("el-form-item",{attrs:{label:"分类标签",prop:"label"}},[t("el-select",{staticStyle:{width:"100%"},attrs:{placeholder:"给任务选1-3个合适的标签",multiple:"","multiple-limit":3,filterable:""},model:{value:n.mission.label,callback:function(e){n.$set(n.mission,"label",e)},expression:"mission.label"}},n._l(n.tagOptions,function(n,e){return t("el-option",{key:e,attrs:{label:n,value:e}})}))],1),n._v(" "),t("el-form-item",{attrs:{label:"需求描述",prop:"description"}},[t("el-input",{attrs:{type:"textarea",autosize:"",placeholder:"请说明任务的需求"},model:{value:n.mission.description,callback:function(e){n.$set(n.mission,"description",e)},expression:"mission.description"}})],1)],1),n._v(" "),t("el-form",{staticStyle:{width:"100%"},attrs:{size:"small","label-width":"80px",rules:n.missionRules},nativeOn:{submit:function(n){n.preventDefault()}}},[t("el-form-item",{attrs:{label:"图片上传"}},[t("el-upload",{ref:"upload",attrs:{accept:"image/*",limit:60,action:"http://httpbin.org/","auto-upload":!1,"list-type":"picture-card","on-change":n.handleChange,"on-preview":n.handlePreview,"on-remove":n.handleRemove,multiple:"",prop:"upload"}},[t("i",{staticClass:"el-icon-plus"})])],1)],1),n._v(" "),t("el-form",{staticStyle:{"margin-bottom":"50px"},attrs:{inline:"",size:"small","label-width":"80px"},nativeOn:{submit:function(n){n.preventDefault()}}},[t("el-form-item",{attrs:{label:"悬赏积分"}},[t("el-tooltip",{staticClass:"item",attrs:{effect:"dark",content:"积分越多，预计完成时间就越短",placement:"top-end"}},[t("el-input-number",{attrs:{min:7,max:30,step:1},model:{value:n.mission.perPoints,callback:function(e){n.$set(n.mission,"perPoints",e)},expression:"mission.perPoints"}})],1),n._v(" "),t("span",[n._v(" / 张")])],1),n._v(" "),t("el-form-item",{attrs:{label:"总计"}},[n._v("\n      "+n._s(n.mission.perPoints*n.picNumber)+"\n    ")]),n._v(" "),t("el-form-item",[t("el-button",{attrs:{loading:n.loading,type:"primary"},on:{click:n.onSubmit}},[n._v("创建任务")]),n._v(" "),t("el-button",{on:{click:n.resetForm}},[n._v("取消")])],1)],1)],1)},staticRenderFns:[]};var c=t("VU/8")(a,o,!1,function(n){t("DTcy")},"data-v-c2a5bab0",null);e.default=c.exports},pIcg:function(n,e,t){(n.exports=t("FZ+f")(!1)).push([n.i,"\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n",""])}});